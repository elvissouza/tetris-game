"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".grid"),o=Array.from(document.querySelectorAll(".grid div")),r=document.querySelector("#score"),n=document.querySelector("#scoreTitle"),t=document.querySelector("#start-button"),c=document.querySelector("#pause-button"),s=document.querySelector("#reload-button"),a=10,i=0,u=void 0,l=0,d=["orange","red","purple","green","blue"],f=[[[1,a+1,2*a+1,2],[a,a+1,a+2,2*a+2],[1,a+1,2*a+1,2*a],[a,2*a,2*a+1,2*a+2]],[[0,a,a+1,2*a+1],[a+1,a+2,2*a,2*a+1],[0,a,a+1,2*a+1],[a+1,a+2,2*a,2*a+1]],[[1,a,a+1,a+2],[1,a+1,a+2,2*a+1],[a,a+1,a+2,2*a+1],[1,a,a+1,2*a+1]],[[0,1,a,a+1],[0,1,a,a+1],[0,1,a,a+1],[0,1,a,a+1]],[[1,a+1,2*a+1,3*a+1],[a,a+1,a+2,a+3],[1,a+1,2*a+1,3*a+1],[a,a+1,a+2,a+3]]],m=4,L=0,v=Math.floor(Math.random()*f.length),y=f[v][L];function k(){y.forEach(function(n){o[m+n].classList.add("tetromino"),o[m+n].style.backgroundColor=d[v]})}function h(){y.forEach(function(n){o[m+n].classList.remove("tetromino"),o[m+n].style.backgroundColor=""})}function g(){h(),m+=a,k(),y.some(function(n){return o[m+n+a].classList.contains("taken")})&&(y.forEach(function(n){return o[m+n].classList.add("taken")}),v=i,i=Math.floor(Math.random()*f.length),y=f[v][L],m=4,k(),M(),function(){for(var n=0;n<199;n+=a){var t=[n,n+1,n+2,n+3,n+4,n+5,n+6,n+7,n+8,n+9];t.every(function(n){return o[n].classList.contains("taken")})&&(l+=10,r.innerHTML=l,t.forEach(function(n){o[n].classList.remove("taken"),o[n].classList.remove("tetromino"),o[n].style.backgroundColor=""}),(o=o.splice(n,a).concat(o)).forEach(function(n){return e.appendChild(n)})),0<l&&r.classList.add("score-color")}}(),S())}document.addEventListener("keyup",function(n){37===n.keyCode?function(){h(),y.some(function(n){return(m+n)%a==0})||--m;y.some(function(n){return o[m+n].classList.contains("taken")})&&(m+=1);k()}():38===n.keyCode?function(){h(),++L===y.length&&(L=0);y=f[v][L],k()}():39===n.keyCode?function(){h(),y.some(function(n){return(m+n)%a==a-1})||(m+=1);y.some(function(n){return o[m+n].classList.contains("taken")})&&--m;k()}():40===n.keyCode&&g()});var E=document.querySelectorAll(".mini-grid div"),C=0,b=[[1,5,9,2],[0,4,5,9],[1,4,5,6],[0,1,4,5],[1,5,9,13]];function M(){E.forEach(function(n){n.classList.remove("tetromino"),n.style.backgroundColor=""}),b[i].forEach(function(n){E[C+n].classList.add("tetromino"),E[C+n].style.backgroundColor=d[i]})}function S(){y.some(function(n){return o[m+n].classList.contains("taken")})&&(r.innerHTML="WASTED",n.classList.add("score-display"),r.classList.remove("score-color"),r.classList.add("glitch"),clearInterval(u))}c.addEventListener("click",function(){u&&(clearInterval(u),u=null)}),t.addEventListener("click",function(){u||(k(),u=setInterval(g,1e3),i=Math.floor(Math.random()*f.length),M())}),s.addEventListener("click",function(){location.reload()})});